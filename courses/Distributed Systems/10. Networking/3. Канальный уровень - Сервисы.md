
# **Канальный уровень - Сервисы**

Узнайте об ответственности канального уровня и предоставляемых им сервисах.


В то время как **физический уровень** отвечает за передачу качественного сигнала по физической среде, **канальный уровень** отвечает за перемещение пакета информации от одного узла к соседнему. В этом контексте мы будем считать узел соседним, если он соединен одним коммуникационным каналом, независимо от того, проводной он или беспроводной.

## **Сервисы, предоставляемые канальным уровнем**

Канальный уровень может предоставлять следующие сервисы:

### **Кадрирование**

Этот процесс включает в себя инкапсуляцию полезной нагрузки с более высоких уровней стека в пакет канального уровня, обычно называемый **кадром**.

### **Доступ к каналу**

Физический канал может быть общим для нескольких узлов, что означает, что должен существовать способ управления доступом к этому каналу, чтобы узлы могли координировать свои действия и гарантировать, что в каждый момент времени данные передает только один из них. Это достигается с помощью протоколов, известных как **протоколы управления доступом к среде (MAC-протоколы)**. Эти протоколы можно сгруппировать в три основные категории:

*   Протоколы с разделением канала
*   Протоколы случайного доступа
*   Протоколы с поочередным доступом

#### **Протоколы с разделением канала**

Протоколы с разделением канала делят канал на части, которые могут использоваться одновременно несколькими узлами. Существует три основных типа протоколов с разделением канала:

*   **Множественный доступ с разделением по времени (Time-division multiple access):** Этот тип протокола используется для назначения узлам отдельных временных слотов, в течение которых им разрешено передавать данные.
*   **Множественный доступ с разделением по частоте (Frequency-division multiple access):** Этот тип протокола используется для назначения узлам определенных частот, на которых им разрешено передавать данные.
*   **Множественный доступ с кодовым разделением (Code-division multiple access):** В этом типе протокола узлы могут передавать данные одновременно, но кодируют свои данные с использованием разных схем кодирования.

#### **Протоколы случайного доступа**

Как следует из названия, протоколы случайного доступа позволяют любому узлу передавать данные на полной скорости канала в любое время, что означает, что передачи от нескольких узлов могут сталкиваться (коллизии), и узлам может потребоваться повторная передача этих данных.

Существует много протоколов случайного доступа, но два самых известных и широко используемых — это протокол ALOHA и протокол CSMA.

*   **Протокол ALOHA** довольно прост. Когда у узлов есть данные, они их передают. Если они получают данные от других узлов во время передачи своих данных, они пытаются передать те же данные позже.
*   **Протокол CSMA**, что означает множественный доступ с контролем несущей, немного сложнее, поскольку узлы прослушивают канал перед передачей и начинают передачу, только если канал свободен.

> **Примечание**: Существует несколько вариантов CSMA, которые по-разному обрабатывают коллизии, но мы не будем их рассматривать в этом курсе.

#### **Протоколы с поочередным доступом**

Протоколы с поочередным доступом позволяют узлам координировать свои действия для получения доступа к среде.

Два основных протокола с поочередным доступом:

*   **Протокол опроса (polling protocol):** Этот протокол используется для назначения одного узла в качестве ведущего, который отвечает за последовательную передачу доступа к среде между узлами.
*   **Протокол с передачей маркера (token-passing protocol):** Этот протокол используется, когда узлы работают без ведущего узла для последовательной передачи доступа к среде. Они выполняют эту задачу самостоятельно, передавая специальное сообщение (маркер), которое дает каждому узлу доступ к среде.

### **Надежная доставка**

**Надежная доставка** — это гарантия того, что данные, переданные по среде, будут получены адресатом, независимо от возможных осложнений. Как будет объяснено позже, надежная доставка доступна только на некоторых более высоких уровнях, поэтому не все протоколы канального уровня предоставляют этот сервис.

Из соображений производительности надежная доставка часто обеспечивается на каналах, подверженных высокому уровню ошибок, таких как беспроводные каналы. Однако, чтобы избежать дополнительных накладных расходов, она обычно не предоставляется для каналов с низким уровнем ошибок, таких как проводные.

#### **Обеспечение надежной доставки**

Надежная доставка достигается за счет передачи сообщений-подтверждений от получателя и повторных передач со стороны отправителя.

### **Обнаружение и исправление ошибок**

**Обнаружение ошибок** — это процесс, используемый для выявления случаев, когда во время передачи возникает ошибка — из-за затухания сигнала и электромагнитного шума. Этот процесс также используется для восстановления после этой ошибки путем обнаружения измененных данных и способа их изменения.

Для выполнения этого процесса обнаружения и исправления ошибок данные отправляются вместе с дополнительным избыточным фрагментом данных, который можно использовать для определения, были ли данные получены в том виде, в котором они были изначально переданы, или как-то изменились. Существует много техник для выполнения этого процесса, но наиболее распространенными являются контрольные суммы и циклические избыточные проверки (CRC).

#### **Техника контрольной суммы**

В **техниках контрольной суммы** поток данных рассматривается как последовательность k-битных целых чисел, которые суммируются для получения контрольной суммы, отправляемой вместе с данными.

#### **Циклические избыточные проверки**

При использовании **циклических избыточных проверок** к данным, которые необходимо отправить, добавляется список битов, так что полученное число делится нацело на заранее согласованное число.

## **Канальный уровень как мост**

> **Примечание**: Физический уровень состоит из спецификаций аппаратных компонентов, которые участвуют в передаче данных по физической среде.

Канальный уровень содержит некоторые части, реализованные аппаратно, то есть в сетевой карте, и другие части, реализованные программно, то есть в драйверах устройств.

Более высокие уровни реализуются исключительно программно. Например, они либо входят в состав ядра ОС, либо в сторонние библиотеки.

В результате канальный уровень по сути образует мост между аппаратным и программным обеспечением.

> **Примеча-ние**: Это верно в общем случае, но всегда есть исключения, и в будущем их может стать больше, учитывая быстрый прогресс в развитии аппаратных компонентов. В качестве примера, TCP offload engine — это технология, которая переносит обработку более высоких уровней на сетевой контроллер для достижения более высокой производительности.