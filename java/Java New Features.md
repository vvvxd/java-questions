JAVA 9. Что нового?

1) Фабричные методы для коллекций

List.of(1, 2, 3)
Set.of(1, 2)
Map.of("hello", "world")

2) Стримы
   методы dropWhile и takeWhile. dropWhile выбрасывает элементы с начала и до тех пор, пока не будет выполнено условие, а takeWhile — забирает элементы вплоть до выполнения условия.

IntStream.range(1, 10)
.dropWhile(x -> x < 5).forEach(System.out::println)

Метод iterate(). Он позволяет заменять циклы стримами.

ntStream.iterate(0, x -> x < 3, x -> x +1) .forEach(System.out::println)

3) Optional
   Метод or() и ifPresentOrElse()

4) Completable future

метод copy(), который возвращает немутабельную копию этого CompletableFuture. Раньше нужно было знатно помучиться, обруливая ситуации, когда клиент может сам завершить CompletableFuture, возвращенное из такого API. Сейчас достаточно просто взывать метод copy().
completeOnTimeout() - работа с таймаутами,

5) StackWalker
   StackWalker дает возможность бродить по стеку, фильтровать его, и эффективно делать разные другие вещи. Этот пример выдернет верхние 5 элементов из стектрейс

6) Интерфейсы
   Интерфейсы в Java 9 смогут содержать приватные методы. В Java 8 мы получили возможность хранить некую общую логику в default-методах. Теперь мы сможем выделять общую логику и внутри интерфейсов, без необходимости создания вспомогательных классов.

7) try-with-resources
   Теперь можно использовать effectively final переменные в блоках try-with-resources. Это упрощает код, не нужно больше объявлять переменные внутри try. Просто работаете с ними в блоке try, и это компилируется.
   boolean a() throws Exception {
   Socket s = new Socket();
   try (s) { } return s.isClosed();
   }

--------------------------------------------------------------------------------------------------------------------
JAVA 10 Что нового?

Local-Variable Type Inference
Можно не указывать тип локальной переменной. Ключевое слово var позаботится об этом:

var data = new ArrayList<String>();

--------------------------------------------------------------------------------------------------------------------
JAVA 11 Что нового?

1) Строки и файлы
   Строки и файлы получили несколько новых методов (не все перечислены здесь):
   "Marco".isBlank();
   "Mar\nco".lines();
   "Marco ".strip();
   Path path = Files.writeString(Files.createTempFile("helloworld", ".txt"), "Hi, my name is!");
   String s = Files.readString(path);

2) Запустить исходные файлы
   Начиная с Java 10, вы можете запускать исходные файлы Java без предварительной компиляции. Шаг к написанию сценариев.
   java MyScript.java

3) Вывод типа локальной переменной (var) для лямбда-параметров
   В заголовке все сказано:
   (var firstName, var lastName) -> firstName + lastName

4) HttpClient
   HttpClient из Java 9, но уже в окончательной, а не превью версии.

5)Другие вкусности
Flight Recorder (Регистратор полетов), сборщик мусора No-Op, Nashorn-Javascript-Engine объявлен deprecated (устаревшим) и т.д.

--------------------------------------------------------------------------------------------------------------------
JAVA 17 Что нового?

1) Records
   Records (записи) - это ответ Java на Lombok. По крайней мере, частично. Запись - это тип, предназначенный для хранения некоторых данных.

Запись автоматически получает множество стандартных членов:
Private final поле для каждого компонента описания состояния;
Public метод доступа для чтения для каждого компонента описания состояния с тем же именем и типом, что и компонент;
Public конструктор, сигнатура которого совпадает с описанием состояния, который инициализирует каждое поле из соответствующего аргумента;
Реализации equals и hashCode, которые говорят, что две записи равны, если они одного типа и содержат одно и то же состояние; а также
Реализацию toString, которая включает строковое представление всех компонентов записи с их именами.

public record Triangle(int x, int y, int z){}

2)Расширенные Switch выражения
boolean freeDay = switch (dayOfWeek) {
case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -> false;
case SATURDAY, SUNDAY -> true;
};

3)Сопоставление с образцом Instanceof
Теперь вам не придется писать приведение к типу после Instanceof. Теперь Java может создать локальную переменную внутри if, например:
if (obj instanceof MyObject myObject) { // ... логика }

4)TextBlocks
Многострочный текстовый блок теперь можно объявить следующим образом:
String myWallOfText = """ блок"""

5)Улучшенные NullPointerExceptions
Однажды в моем приложении была такая цепочка вызовов, и я думаю, она вам тоже может показаться знакомой:
company.getOwner().getAddress().getCity();
Я получил NPE, который точно сказал мне, в какой строке был обнаружен null. Да, это была эта строка. Без отладчика я не мог бы сказать, какой объект был null, или, скорее, какая операция вызова на самом деле вызвала проблему. Теперь сообщение будет конкретным, и в нем будет сказано, что JVM «не может вызвать Person.getAddress()».

--------------------------------------------------------------------------------------------------------------------