Что такое Spring Boot Actuator?

Spring Boot Actuator является подпроектом (sub-project) в проекте Spring Boot. Он построен для собрания и мониторинга инфомации приложения. Вы можете внедрить его в свое приложение и использовать его свойства. Для мониторинга приложения вам нужно получить доступ в endpoint (Конечные точки) построенные в Spring Boot Actuator, одновременно, вы можете создать свои отдельные endpoint если хотите.

--------------------------------------------------------------------------------------------------------------------

Что делает endpoint /health?

Конечная точка health даёт общий статус приложения: запущено и работает или нет. Это очень важно для мониторинга состояния приложения, когда оно находится в продакшене. Эта конечная точка может быть интегрирована с приложениями мониторинга и будет очень полезна для определения работоспособности приложений в реальном времени.

Объем информации, предоставляемой конечной точкой health, зависит от свойства management.endpoint.health.show-details в файле application.properties.

Если management.endpoint.health.show-details=never, то никакая дополнительная информация не отображается.

Если management.endpoint.health.show-details=always, то дополнительная информация показывается всем пользователям.

Если management.endpoint.health.show-details=when-authorized, то дополнительная информация будет показана только авторизованным пользователям.

{
"status": "UP",
"details":
{ "diskSpace":
{ "status": "UP",
"details": {
"total": 75812040704,
"free": 8067600384,
"threshold": 10485760
}
}
}
}

--------------------------------------------------------------------------------------------------------------------

Преднастроенные индикаторы в Spring Boot Actuator

Spring Boot Actuator имеет множество автоматически настроенных "индикаторов здоровья" (HeathIndicators)для проверки работоспособности различных частей приложения. Например, DiskspaceHealthIndicator предоставляет информацию о дисковом пространстве. Если вы используете MongoDB, то MongoHealthIndicator проверит работоспособность БД Mongo (запущен сервер или нет) и отобразит соответствующую информацию. По умолчанию окончательный статус приложения определяет HealthAggregator, который просто сортирует список статусов, предоставленных каждым HealthIndicator. Первый статус в отсортированном списке используется как окончательный статус приложения.

--------------------------------------------------------------------------------------------------------------------

Как написать свой индикатор?

Наряду со встроенными HealthIndicator, предоставляемыми Spring Boot Actuator, мы можем создавать собственные индикаторы состояния. Для этого вам нужно создать класс, который реализует интерфейс HealthIndicator, реализовать его метод health() и вернуть Health в качестве ответа с соответствующей информацией,

--------------------------------------------------------------------------------------------------------------------

Что делает endpoint /info?

Конечная точка info предоставляет общую информацию о приложении, которую она получает из файлов, таких как build-info.properties или git.properties, или из свойств, указанных в application.properties.

Spring Boot Actuator отображает информацию о сборке, если присутствует файл META-INF/build-info.properties. Этот файл с информацией о проекте создается время сборки целью build-info. Здесь также можно добавить произвольное количество дополнительных свойств.

--------------------------------------------------------------------------------------------------------------------

Что делает endpoint /beans?

Конечная точка beans показывает все бины, определенные в Spring-контейнере со следующей информацией о каждом бине:

aliases : названия всех псевдонимов
scope : область видимости
type : полное имя бина
resource : ресурс (класс), в котором определён бин
dependencies : имена зависимых бинов

--------------------------------------------------------------------------------------------------------------------

Что делает endpoint /configprops?

Конечная точка configProps показывает все бины, аннотированные @ConfigurationProperties.

--------------------------------------------------------------------------------------------------------------------

Что делает endpoint /env?

Конечная точка env предоставляет всю информацию, относящуюся к

системное окружение или переменные окружения (зависит от операционной системы (зависит от платформы)),

настройки уровня приложения (определены вapplication.properties)

--------------------------------------------------------------------------------------------------------------------

Что делает endpoint /heapdump?

Конечная точка heapdump делает дамп кучи приложения. Эта конечная точка возвращает двоичные данные в формате HPROF. Поскольку обычно возвращается много данных, вы должны их сохранить и проанализировать.

--------------------------------------------------------------------------------------------------------------------

Что делает endpoint /loggers?

Конечная точка loggers предоставляет логгеры приложения с информацией об их настроенном уровне логирования (configuredLevel) и эффективном уровне (effectiveLevel). Если для логера и его родителя настроенный уровень не указан (null), то эффективным уровнем будет уровень корневого логера.

--------------------------------------------------------------------------------------------------------------------

Что делает endpoint /metrics?

Конечная точка metrics показывает все метрики, которые вы можете отслеживать для вашего приложения.

{ "names":
[ "jvm.memory.committed",
"jvm.buffer.memory.used",
"jvm.buffer.count",
"logback.events",
"process.uptime",
"jvm.memory.max",
"jvm.memory.used",
"jvm.buffer.total.capacity",
"system.cpu.count",
"process.start.time"
]
}

И вы можете посмотреть информацию определенного metric.

actuator/metrics/{requiredMetricName}

--------------------------------------------------------------------------------------------------------------------